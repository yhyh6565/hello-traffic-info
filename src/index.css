@import "@fontsource/noto-sans-kr/400.css";
@import "@fontsource/noto-sans-kr/500.css";
@import "@fontsource/noto-sans-kr/700.css";
@import "@fontsource/playfair-display/400.css";
@import "@fontsource/playfair-display/700.css";
@import "@fontsource/gowun-batang/400.css";
@import "@fontsource/gowun-batang/700.css";

@tailwind base;
@tailwind components;
@tailwind utilities;

/* 안녕 교통정보 - Perfect Camouflage Design System (Retro Radio Edition) */

@layer base {
  :root {
    /* Retro Radio Palette */
    --radio-wood: 27 30% 22%;
    /* #4A3728 - Deep Walnut */
    --radio-face: 42 60% 85%;
    /* #F4E4BC - Aged Cream */
    --radio-accent: 43 46% 56%;
    /* #C5A059 - Brass/Gold */
    --radio-grille: 25 17% 14%;
    /* #2A231E - Speaker Cloth */
    --radio-indicator: 24 100% 44%;
    /* #E05A00 - Warm Orange */

    /* Core Brand Colors - Mapped to Retro Palette */
    --background: var(--radio-wood);
    /* Main background is now wood */
    --foreground: 42 60% 85%;
    /* Text on wood is cream */

    --card: var(--radio-face);
    /* Cards are Faceplates */
    --card-foreground: 27 30% 22%;
    /* Text on face is walnut */

    --popover: var(--radio-face);
    --popover-foreground: 27 30% 22%;

    /* Primary - Action Color */
    --primary: var(--radio-indicator);
    --primary-foreground: 0 0% 100%;

    /* Secondary - Accents */
    --secondary: var(--radio-accent);
    --secondary-foreground: 27 30% 22%;

    /* Muted */
    --muted: 27 20% 30%;
    --muted-foreground: 42 40% 70%;

    /* Accent */
    --accent: var(--radio-accent);
    --accent-foreground: 27 30% 22%;

    /* Destructive */
    --destructive: 0 85% 55%;
    --destructive-foreground: 0 0% 100%;

    /* Glitch Color (Retained for atmosphere) */
    --glitch: 0 100% 45%;
    --glitch-foreground: 0 0% 100%;

    --border: var(--radio-accent);
    --input: 42 30% 80%;
    --ring: var(--radio-indicator);

    --radius: 0.5rem;
    /* Slightly reduced for retro mechanical feel */

    /* Mobile Frame Shadows */
    --shadow-mobile: 0 30px 60px rgba(0, 0, 0, 0.5);
    --shadow-album: 2px 2px 5px rgba(0, 0, 0, 0.4);

    /* Sidebar */
    --sidebar-background: var(--radio-wood);
    --sidebar-foreground: var(--radio-face);
    --sidebar-primary: var(--radio-accent);
    --sidebar-primary-foreground: var(--radio-wood);
    --sidebar-accent: 27 25% 28%;
    --sidebar-accent-foreground: var(--radio-face);
    --sidebar-border: var(--radio-accent);
    --sidebar-ring: var(--radio-indicator);
  }

  .dark {
    /* Single Retro Mode - Dark Mode is just 'Night Radio' (same wood, dimmer face?) 
       For now, mapped identical to root to enforce the Wood theme constantly 
    */
    --background: 27 30% 15%;
    --foreground: 42 50% 80%;
    --card: 27 25% 18%;
    --card-foreground: 42 50% 80%;
    /* ... keeping it simple for now, relying on the main palette */
  }
}

@layer base {
  * {
    @apply border-border;
  }

  body {
    @apply bg-background text-foreground;
    font-family: 'Noto Sans KR', -apple-system, BlinkMacSystemFont, sans-serif;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
  }
}

@layer components {

  /* LP Disc Spin Animation */
  @keyframes spin-lp {
    from {
      transform: rotate(0deg);
    }

    to {
      transform: rotate(360deg);
    }
  }

  .animate-spin-lp {
    animation: spin-lp 3s linear infinite;
  }

  /* Enhanced Glitch Effect */
  @keyframes glitch-rgb {
    0% {
      transform: translate(0);
      text-shadow:
        -2px 0 0 rgba(255, 0, 0, 0.7),
        2px 0 0 rgba(0, 255, 255, 0.7);
    }

    20% {
      transform: translate(-2px, 2px);
      text-shadow:
        -3px 0 0 rgba(255, 0, 0, 0.8),
        3px 0 0 rgba(0, 255, 255, 0.8);
    }

    40% {
      transform: translate(2px, -2px);
      text-shadow:
        -2px 2px 0 rgba(255, 0, 0, 0.9),
        2px -2px 0 rgba(0, 255, 255, 0.9);
    }

    60% {
      transform: translate(-1px, 1px);
      text-shadow:
        -4px 0 0 rgba(255, 0, 0, 0.7),
        4px 0 0 rgba(0, 255, 255, 0.7);
    }

    80% {
      transform: translate(1px, -1px);
      text-shadow:
        -2px 0 0 rgba(255, 0, 0, 0.8),
        2px 0 0 rgba(0, 255, 255, 0.8);
    }

    100% {
      transform: translate(0);
      text-shadow:
        -2px 0 0 rgba(255, 0, 0, 0.7),
        2px 0 0 rgba(0, 255, 255, 0.7);
    }
  }

  @keyframes scanline {
    0% {
      transform: translateY(-100%);
    }

    100% {
      transform: translateY(100%);
    }
  }

  @keyframes vhs-noise {

    0%,
    100% {
      opacity: 0.1;
    }

    10% {
      opacity: 0.15;
    }

    20% {
      opacity: 0.08;
    }

    30% {
      opacity: 0.12;
    }

    40% {
      opacity: 0.1;
    }

    50% {
      opacity: 0.14;
    }

    60% {
      opacity: 0.09;
    }

    70% {
      opacity: 0.11;
    }

    80% {
      opacity: 0.13;
    }

    90% {
      opacity: 0.1;
    }
  }

  .glitch-text {
    @apply text-destructive;
    font-family: 'Courier New', monospace;
    animation: glitch-rgb 0.3s infinite;
    position: relative;
  }

  .glitch-text::before {
    content: attr(data-text);
    position: absolute;
    left: -2px;
    text-shadow: -2px 0 rgba(255, 0, 0, 0.7);
    animation: glitch-rgb 0.4s infinite reverse;
    clip: rect(0, 900px, 0, 0);
  }

  .glitch-text::after {
    content: attr(data-text);
    position: absolute;
    left: 2px;
    text-shadow: 2px 0 rgba(0, 255, 255, 0.7);
    animation: glitch-rgb 0.5s infinite;
    clip: rect(0, 900px, 0, 0);
  }

  /* CRT Scanline Effect */
  .crt-scanline {
    position: relative;
    overflow: hidden;
  }

  .crt-scanline::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 2px;
    background: rgba(255, 255, 255, 0.1);
    animation: scanline 4s linear infinite;
    z-index: 10;
    pointer-events: none;
  }

  .crt-scanline::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      repeating-linear-gradient(0deg,
        rgba(0, 0, 0, 0.15) 0px,
        rgba(0, 0, 0, 0.15) 1px,
        transparent 1px,
        transparent 2px);
    pointer-events: none;
    z-index: 5;
  }

  /* VHS Noise Effect */
  .vhs-noise {
    position: relative;
  }

  .vhs-noise::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-image:
      repeating-linear-gradient(90deg,
        rgba(0, 0, 0, 0.05) 0px,
        rgba(255, 255, 255, 0.03) 1px,
        rgba(0, 0, 0, 0.05) 2px);
    animation: vhs-noise 0.5s infinite;
    pointer-events: none;
    z-index: 10;
    opacity: 0.1;
  }

  /* Progress Bar Animation */
  @keyframes progress-pulse {

    0%,
    100% {
      opacity: 1;
    }

    50% {
      opacity: 0.7;
    }
  }

  .progress-playing {
    animation: progress-pulse 2s ease-in-out infinite;
  }

  /* Waveform Animation */
  @keyframes wave {

    0%,
    100% {
      transform: scaleY(1);
    }

    50% {
      transform: scaleY(0.5);
    }
  }

  .wave-bar {
    animation: wave 0.5s ease-in-out infinite;
  }

  .wave-bar:nth-child(1) {
    animation-delay: 0s;
  }

  .wave-bar:nth-child(2) {
    animation-delay: 0.1s;
  }

  .wave-bar:nth-child(3) {
    animation-delay: 0.2s;
  }

  .wave-bar:nth-child(4) {
    animation-delay: 0.3s;
  }

  .wave-bar:nth-child(5) {
    animation-delay: 0.4s;
  }

  /* ON AIR LED Pulse Animation */
  @keyframes pulse-led {

    0%,
    100% {
      opacity: 1;
      box-shadow: 0 0 8px rgba(239, 68, 68, 0.8);
    }

    50% {
      opacity: 0.6;
      box-shadow: 0 0 4px rgba(239, 68, 68, 0.4);
    }
  }

  .animate-pulse-led {
    animation: pulse-led 1.5s ease-in-out infinite;
  }

  /* Typing Cursor Blink Animation */
  @keyframes blink {

    0%,
    50% {
      opacity: 1;
    }

    51%,
    100% {
      opacity: 0;
    }
  }

  .animate-blink {
    animation: blink 1s step-end infinite;
  }

  /* Radio Static Effect */
  @keyframes static-noise {
    0% {
      background-position: 0 0;
    }

    100% {
      background-position: 100% 100%;
    }
  }
}

@layer utilities {

  /* Radio Texture Utilities */
  .bg-wood-pattern {
    background-color: hsl(27, 30%, 22%);
    background-image:
      repeating-linear-gradient(45deg, rgba(255, 255, 255, 0.03) 0px, rgba(255, 255, 255, 0.03) 1px, transparent 1px, transparent 12px),
      repeating-linear-gradient(-45deg, rgba(0, 0, 0, 0.1) 0px, rgba(0, 0, 0, 0.1) 1px, transparent 1px, transparent 24px);
  }

  .bg-speaker-grille {
    background-color: hsl(25, 17%, 14%);
    background-image:
      radial-gradient(hsla(43, 46%, 56%, 0.3) 15%, transparent 16%),
      radial-gradient(hsla(43, 46%, 56%, 0.3) 15%, transparent 16%);
    background-size: 6px 6px;
    background-position: 0 0, 3px 3px;
    box-shadow: inset 0 0 20px rgba(0, 0, 0, 0.8);
  }

  .btn-retro {
    @apply border-b-4 border-r-2 active:border-0 active:translate-y-1 transition-all;
    border-color: rgba(0, 0, 0, 0.3);
    box-shadow: 2px 2px 4px rgba(0, 0, 0, 0.2);
  }

  .panel-inset {
    box-shadow: inset 2px 2px 6px rgba(0, 0, 0, 0.3), inset -1px -1px 2px rgba(255, 255, 255, 0.5);
    @apply border border-opacity-20 border-black;
  }

  .text-shadow-retro {
    text-shadow: 1px 1px 0px rgba(230, 210, 180, 0.4);
  }

  .text-glitch {
    color: hsl(var(--glitch));
  }

  /* LED Text Effects for Listener Counter */
  .led-text-green {
    color: #22c55e;
    text-shadow:
      0 0 5px rgba(34, 197, 94, 0.8),
      0 0 10px rgba(34, 197, 94, 0.5),
      0 0 15px rgba(34, 197, 94, 0.3);
  }

  .led-text-red {
    color: #ef4444;
    text-shadow:
      0 0 5px rgba(239, 68, 68, 0.9),
      0 0 10px rgba(239, 68, 68, 0.6),
      0 0 20px rgba(239, 68, 68, 0.4);
    animation: led-flicker 0.15s infinite;
  }

  @keyframes led-flicker {
    0%, 100% { opacity: 1; }
    50% { opacity: 0.85; }
  }

  .transition-title {
    transition: opacity 0.3s ease-in-out, color 0.3s ease, font-family 0.3s ease;
  }

  /* Safe area padding for mobile */
  .safe-area-inset {
    padding-top: env(safe-area-inset-top);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
    padding-right: env(safe-area-inset-right);
  }

  /* Loal Theme Wrapper for Faceplate */
  .radio-face-theme {
    --foreground: 27 30% 22%;
    /* Walnut */
    --muted-foreground: 27 20% 50%;
    /* Lite Walnut */
    --primary: 24 100% 44%;
    /* Orange */
    --accent-foreground: 27 30% 22%;
  }
}