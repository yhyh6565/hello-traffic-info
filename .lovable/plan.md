
# 가상 청취자 카운터 구현 계획 (2분 내 목표 도달)

TrackInfo와 ProgressBar 사이에 **80년대 7-세그먼트 LED 스타일 청취자 카운터**를 구현합니다.

---

## 핵심 동작

1. **시작**: 100명에서 시작
2. **증가**: 2분 내에 목표치 도달하도록 빠른 속도로 상승
3. **목표 도달**: 1000~1500명 사이 랜덤 숫자에 도달
4. **공포 효과**: 갑자기 **444**명으로 급락 (글리치 효과)
5. **반복**: 잠시 후 다시 100명부터 사이클 재시작

---

## 타이밍 계산

목표: 100 → 1500 (최대) = 1400 증가를 120초 내에 완료

| 파라미터 | 값 | 설명 |
|---------|-----|------|
| 증가 간격 | 300ms ~ 800ms | 빠른 업데이트 |
| 증가량 | 5 ~ 20명 | 충분한 증가폭 |
| 평균 증가량 | ~12.5명 | (5+20)/2 |
| 예상 횟수 | ~112회 | 1400/12.5 |
| 평균 간격 | ~550ms | (300+800)/2 |
| 예상 소요 시간 | ~62초 | 112 × 550ms |

**결과**: 약 1분~1분 30초 내에 목표 도달 (2분 이내 보장)

---

## 구현 파일

### 1. 새 파일: `src/hooks/useListenerCounter.ts`

커스텀 훅으로 카운터 로직 관리:

```
- count: 현재 청취자 수
- isGlitching: 444 상태 여부 (공포 효과용)
- 재생 중일 때만 카운터 활성화
- 목표 도달 시 444로 급락 후 3~5초 대기
- 이후 100으로 리셋하여 사이클 반복
```

### 2. 새 파일: `src/components/ListenerCounter.tsx`

7-세그먼트 LED 스타일 UI:

```
┌─────────────────────────┐
│   ♪ LISTENERS           │
│      1,247              │  ← 녹색 LED 숫자
│      청취 중             │
└─────────────────────────┘

        ↓ 목표 도달 시

┌─────────────────────────┐
│   ⚠ LISTENERS           │
│       444               │  ← 빨간색 글리치
│      청취 중             │
└─────────────────────────┘
```

### 3. 수정: `src/index.css`

LED 발광 효과 스타일 추가:
- 녹색 LED glow (정상 상태)
- 빨간색 LED glow + 글리치 애니메이션 (444 상태)
- 숫자 변경 시 미세한 깜빡임

### 4. 수정: `src/components/RadioPlayer.tsx`

TrackInfo 아래, ProgressBar 위에 ListenerCounter 컴포넌트 배치

---

## 세부 구현 사항

### useListenerCounter 훅 로직

```
상태:
- count: number (시작값 100)
- target: number (1000~1500 랜덤)
- isGlitching: boolean (444 상태)
- phase: 'counting' | 'glitch' | 'reset'

타이머 로직:
1. isPlaying === true 일 때만 작동
2. 300~800ms 랜덤 간격으로 setInterval
3. 매 틱마다 5~20 랜덤 증가
4. count >= target 도달 시:
   - count를 444로 설정
   - isGlitching = true
   - 3~5초 대기
   - count를 100으로 리셋
   - 새 target 설정 (1000~1500)
   - isGlitching = false
5. isPlaying === false 시 타이머 정리
```

### ListenerCounter 컴포넌트 스타일

- 폰트: `font-mono` (고정폭)
- 일반 상태: 녹색 (`#00ff00`) LED glow
- 444 상태: 빨간색 (`#ff0000`) + 글리치 애니메이션
- 숫자 포맷: `toLocaleString()` 으로 천 단위 콤마

---

## 기대 효과

사용자가 라디오를 듣다가 청취자 수가 점점 올라가는 것을 보게 됩니다. 1분~1분 30초 후 갑자기 **444**로 떨어지면서 빨간색 글리치 효과가 발생하여 소름 끼치는 경험을 제공합니다. 동아시아에서 4가 죽음을 연상시키는 숫자라는 점이 공포감을 극대화합니다.
